# 🖼️ 配置微信赞赏码图片到 Vercel

## ✅ 方案一：使用 public 目录（推荐，最简单）

### 1. 图片位置

图片已经放在：`public/wechat-reward.jpg`

### 2. 自动访问 URL

部署到 Vercel 后，图片会自动通过以下 URL 访问：

```
https://你的域名.vercel.app/wechat-reward.jpg
```

**例如：**
- 如果域名是 `invet-test.vercel.app`
- 图片 URL 就是：`https://invet-test.vercel.app/wechat-reward.jpg`

### 3. 代码中的使用

代码已经配置好了，会自动：
1. 首先尝试从 Supabase Storage 加载
2. 如果失败，自动回退到本地路径 `/wechat-reward.jpg`

**无需额外配置！** 部署后即可使用。

---

## 🔧 方案二：使用 Supabase Storage（备选方案）

如果你想使用 Supabase Storage 存储图片（更灵活，可以随时更换）：

### 步骤 1：上传图片到 Supabase Storage

1. 打开 Supabase Dashboard：https://supabase.com/dashboard
2. 选择你的项目
3. 点击左侧 **"Storage"**
4. 找到或创建 bucket：`public`
5. 点击 **"Upload file"**
6. 上传 `wechat-reward.jpg`
7. 确保文件权限设置为 **Public**（公开访问）

### 步骤 2：获取图片 URL

上传后，图片 URL 格式为：
```
https://zrfnnerdaijcmhlemqld.supabase.co/storage/v1/object/public/public/wechat-reward.jpg
```

### 步骤 3：验证访问

在浏览器中打开上述 URL，确认图片可以正常显示。

---

## 🎯 方案三：使用环境变量（高级）

如果你想通过环境变量配置图片 URL：

### 步骤 1：在 Vercel 添加环境变量

1. 进入 Vercel Dashboard → 项目设置 → Environment Variables
2. 添加新变量：
   - **Key**: `VITE_WECHAT_REWARD_IMG`
   - **Value**: 你的图片 URL（可以是 Supabase Storage URL 或其他图床 URL）
   - **Environment**: 全选（Production、Preview、Development）

### 步骤 2：修改代码（如果需要）

如果使用环境变量，需要修改 `PurchaseAnalysisCard.tsx`：

```typescript
// 在组件中添加环境变量检查
const envImgUrl = import.meta.env.VITE_WECHAT_REWARD_IMG;
if (envImgUrl) {
  setImgSrc(envImgUrl);
  return;
}
```

**注意**：当前代码已经支持从 Supabase Storage 加载，通常不需要这个方案。

---

## ✅ 推荐方案：使用 public 目录

**为什么推荐方案一？**

1. ✅ **最简单**：图片已经在 `public` 目录，无需额外配置
2. ✅ **自动部署**：推送到 GitHub 后，Vercel 自动部署，图片自动可用
3. ✅ **无需额外服务**：不依赖 Supabase Storage 或其他图床
4. ✅ **代码已支持**：代码已经有回退机制，会自动使用本地图片

### 部署后的访问方式

部署到 Vercel 后：
- 图片 URL：`https://你的域名.vercel.app/wechat-reward.jpg`
- 代码会自动使用这个路径（通过回退机制）

---

## 🔍 验证图片是否可用

### 方法 1：本地测试

1. 启动开发服务器：
   ```bash
   npm run dev
   ```
2. 访问：`http://localhost:5173/wechat-reward.jpg`
3. 确认图片可以正常显示

### 方法 2：部署后测试

1. 部署到 Vercel
2. 访问：`https://你的域名.vercel.app/wechat-reward.jpg`
3. 确认图片可以正常显示

### 方法 3：在应用中测试

1. 完成测试流程
2. 进入分析页面
3. 查看微信赞赏码是否正常显示

---

## 📝 当前配置状态

✅ **已完成：**
- 图片已复制到 `public/wechat-reward.jpg`
- 代码已配置回退机制
- 支持从 Supabase Storage 或本地路径加载

✅ **部署后自动可用：**
- 推送到 GitHub
- Vercel 自动部署
- 图片自动通过静态文件服务提供

---

## 🚀 下一步

1. **提交图片到 Git**：
   ```bash
   git add public/wechat-reward.jpg
   git commit -m "添加微信赞赏码图片"
   git push github HEAD:main
   ```

2. **等待 Vercel 自动部署**

3. **验证图片**：
   - 访问：`https://你的域名.vercel.app/wechat-reward.jpg`
   - 或在应用中测试

---

## 💡 提示

- **图片大小**：建议图片大小不超过 2MB，以确保快速加载
- **图片格式**：支持 JPG、PNG、WebP 等常见格式
- **CDN 加速**：Vercel 会自动通过 CDN 提供静态文件，全球访问速度快

---

## ❓ 常见问题

### Q: 图片上传后显示 404？

**A:** 检查：
1. 图片是否在 `public` 目录（不是 `public/images`）
2. 文件名是否正确：`wechat-reward.jpg`（区分大小写）
3. 是否已提交到 Git 并推送到 GitHub
4. Vercel 是否已重新部署

### Q: 想更换图片怎么办？

**A:** 
1. 替换 `public/wechat-reward.jpg` 文件（保持相同文件名）
2. 提交并推送：
   ```bash
   git add public/wechat-reward.jpg
   git commit -m "更新微信赞赏码图片"
   git push github HEAD:main
   ```
3. Vercel 自动重新部署

### Q: 想使用外部图片 URL？

**A:** 
1. 上传图片到图床（如 Imgur、Cloudinary 等）
2. 在 Vercel 环境变量中添加 `VITE_WECHAT_REWARD_IMG`
3. 修改代码使用环境变量（需要代码修改）

---

**完成！** 图片已配置好，部署后即可使用！🎉

