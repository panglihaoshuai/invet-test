# ğŸ” è°ƒè¯•æŒ‡å— - æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ“‹ å½“å‰çŠ¶æ€

æˆ‘å·²ç»æ·»åŠ äº†éå¸¸è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œç°åœ¨éœ€è¦æ‚¨å¸®åŠ©æŸ¥çœ‹å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚

---

## ğŸ¯ æ“ä½œæ­¥éª¤

### æ­¥éª¤ 1: æ‰“å¼€å¼€å‘è€…å·¥å…·

1. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·**
   - æŒ‰ **F12** é”®
   - æˆ–å³é”®ç‚¹å‡»é¡µé¢ â†’ é€‰æ‹©"æ£€æŸ¥"æˆ–"Inspect"

2. **åˆ‡æ¢åˆ° Console æ ‡ç­¾é¡µ**
   - åœ¨å¼€å‘è€…å·¥å…·é¡¶éƒ¨æ‰¾åˆ°"Console"æ ‡ç­¾
   - ç‚¹å‡»åˆ‡æ¢åˆ° Console è§†å›¾

3. **æ¸…ç©ºä¹‹å‰çš„æ—¥å¿—**
   - ç‚¹å‡» Console å·¦ä¸Šè§’çš„"æ¸…ç©º"å›¾æ ‡ï¼ˆğŸš«ï¼‰
   - æˆ–æŒ‰ Ctrl+L (Windows) / Cmd+K (Mac)

### æ­¥éª¤ 2: åˆ·æ–°é¡µé¢

1. **åˆ·æ–°é¡µé¢**
   - æŒ‰ **F5** é”®
   - æˆ–ç‚¹å‡»æµè§ˆå™¨åˆ·æ–°æŒ‰é’®

2. **ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ**

### æ­¥éª¤ 3: é‡æ–°ç™»å½•

1. **è¾“å…¥é‚®ç®±**
   - è¾“å…¥ï¼š`1062250152@qq.com`

2. **å‘é€éªŒè¯ç **
   - ç‚¹å‡»"å‘é€éªŒè¯ç "æŒ‰é’®
   - ç­‰å¾…æˆåŠŸæç¤º

3. **è¾“å…¥éªŒè¯ç **
   - æ‰“å¼€é‚®ç®±ï¼Œè·å–éªŒè¯ç 
   - åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å®Œæ•´çš„éªŒè¯ç 

4. **ç‚¹å‡»éªŒè¯ç™»å½•**
   - ç‚¹å‡»"éªŒè¯ç™»å½•"æŒ‰é’®
   - **ç«‹å³æŸ¥çœ‹ Console**

### æ­¥éª¤ 4: æŸ¥çœ‹æ—¥å¿—è¾“å‡º

åœ¨ Console ä¸­ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼š

#### å¦‚æœæˆåŠŸï¼ˆæœŸæœ›çš„è¾“å‡ºï¼‰

```
Creating/fetching user profile for: 1062250152@qq.com
[upsertUser] Starting for email: 1062250152@qq.com
[upsertUser] Checking if user exists...
[upsertUser] Fetch result: { existingUser: null, fetchError: null }
[upsertUser] User does not exist, creating new user...
[upsertUser] Insert result: { newUser: {...}, insertError: null }
[upsertUser] User created successfully: { id: "...", email: "...", ... }
User profile created/fetched successfully: { id: "...", email: "...", ... }
```

#### å¦‚æœå¤±è´¥ï¼ˆéœ€è¦æŸ¥çœ‹çš„ä¿¡æ¯ï¼‰

```
Creating/fetching user profile for: 1062250152@qq.com
[upsertUser] Starting for email: 1062250152@qq.com
[upsertUser] Checking if user exists...
[upsertUser] Fetch result: { existingUser: null, fetchError: {...} }
[upsertUser] Error fetching user: {...}
[upsertUser] Error details: {...}
```

æˆ–è€…ï¼š

```
Creating/fetching user profile for: 1062250152@qq.com
[upsertUser] Starting for email: 1062250152@qq.com
[upsertUser] Checking if user exists...
[upsertUser] Fetch result: { existingUser: null, fetchError: null }
[upsertUser] User does not exist, creating new user...
[upsertUser] Insert result: { newUser: null, insertError: {...} }
[upsertUser] Error creating user: {...}
[upsertUser] Error details: {...}
[upsertUser] Error code: "..."
[upsertUser] Error message: "..."
[upsertUser] Error hint: "..."
[upsertUser] Error details: "..."
```

---

## ğŸ“¸ éœ€è¦æˆªå›¾çš„å†…å®¹

### é‡è¦ï¼è¯·æˆªå›¾ä»¥ä¸‹å†…å®¹ï¼š

1. **å®Œæ•´çš„ Console è¾“å‡º**
   - ä» "Creating/fetching user profile" å¼€å§‹
   - åˆ°æœ€åä¸€æ¡é”™è¯¯ä¿¡æ¯
   - åŒ…æ‹¬æ‰€æœ‰çš„ `[upsertUser]` æ—¥å¿—

2. **ç‰¹åˆ«æ³¨æ„è¿™äº›ä¿¡æ¯**ï¼š
   - `[upsertUser] Fetch result:` åé¢çš„å†…å®¹
   - `[upsertUser] Insert result:` åé¢çš„å†…å®¹
   - ä»»ä½• `Error code:` çš„å€¼
   - ä»»ä½• `Error message:` çš„å†…å®¹
   - ä»»ä½• `Error hint:` çš„æç¤º
   - ä»»ä½• `Error details:` çš„è¯¦ç»†ä¿¡æ¯

3. **çº¢è‰²é”™è¯¯ä¿¡æ¯**
   - å¦‚æœæœ‰ä»»ä½•çº¢è‰²çš„é”™è¯¯ä¿¡æ¯ï¼Œä¹Ÿè¯·æˆªå›¾

---

## ğŸ” å…³é”®ä¿¡æ¯è¯´æ˜

### æˆ‘éœ€è¦çŸ¥é“çš„ä¿¡æ¯

#### 1. Fetch é˜¶æ®µ
```
[upsertUser] Fetch result: { existingUser: ?, fetchError: ? }
```
- å¦‚æœ `fetchError` ä¸æ˜¯ `null`ï¼Œè¯´æ˜æŸ¥è¯¢ç”¨æˆ·æ—¶å‡ºé”™
- æˆ‘éœ€è¦çœ‹åˆ° `fetchError` çš„å®Œæ•´å†…å®¹

#### 2. Insert é˜¶æ®µ
```
[upsertUser] Insert result: { newUser: ?, insertError: ? }
```
- å¦‚æœ `insertError` ä¸æ˜¯ `null`ï¼Œè¯´æ˜åˆ›å»ºç”¨æˆ·æ—¶å‡ºé”™
- æˆ‘éœ€è¦çœ‹åˆ° `insertError` çš„å®Œæ•´å†…å®¹

#### 3. é”™è¯¯ä»£ç 
```
[upsertUser] Error code: "..."
```
- è¿™æ˜¯æœ€é‡è¦çš„ä¿¡æ¯
- ä¸åŒçš„é”™è¯¯ä»£ç ä»£è¡¨ä¸åŒçš„é—®é¢˜

### å¸¸è§é”™è¯¯ä»£ç 

| é”™è¯¯ä»£ç  | å«ä¹‰ | å¯èƒ½çš„åŸå›  |
|---------|------|-----------|
| `PGRST116` | è®°å½•æœªæ‰¾åˆ° | æ­£å¸¸æƒ…å†µï¼Œä¼šç»§ç»­åˆ›å»º |
| `23505` | å”¯ä¸€çº¦æŸå†²çª | é‚®ç®±å·²å­˜åœ¨ |
| `42501` | æƒé™ä¸è¶³ | æ²¡æœ‰æ’å…¥æƒé™ |
| `42P01` | è¡¨ä¸å­˜åœ¨ | æ‰¾ä¸åˆ° users è¡¨ |
| `23502` | éç©ºçº¦æŸè¿å | ç¼ºå°‘å¿…å¡«å­—æ®µ |

---

## ğŸ’¡ å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æƒé™ä¸è¶³ (42501)

**ç—‡çŠ¶**ï¼š
```
Error code: "42501"
Error message: "permission denied for table users"
```

**åŸå› **ï¼š
- Supabase å®¢æˆ·ç«¯æ²¡æœ‰æ’å…¥æƒé™

**è§£å†³æ–¹æ¡ˆ**ï¼š
- éœ€è¦æ£€æŸ¥æ•°æ®åº“æƒé™é…ç½®
- å¯èƒ½éœ€è¦é‡æ–°æˆäºˆæƒé™

### é—®é¢˜ 2: è¡¨ä¸å­˜åœ¨ (42P01)

**ç—‡çŠ¶**ï¼š
```
Error code: "42P01"
Error message: "relation \"users\" does not exist"
```

**åŸå› **ï¼š
- users è¡¨ä¸å­˜åœ¨
- æˆ–è€…åœ¨é”™è¯¯çš„ schema ä¸­æŸ¥æ‰¾

**è§£å†³æ–¹æ¡ˆ**ï¼š
- éœ€è¦é‡æ–°åˆ›å»ºè¡¨
- æˆ–è€…æ˜ç¡®æŒ‡å®š schema

### é—®é¢˜ 3: å”¯ä¸€çº¦æŸå†²çª (23505)

**ç—‡çŠ¶**ï¼š
```
Error code: "23505"
Error message: "duplicate key value violates unique constraint"
```

**åŸå› **ï¼š
- é‚®ç®±å·²ç»å­˜åœ¨äºæ•°æ®åº“ä¸­
- ä½†æŸ¥è¯¢æ—¶æ²¡æœ‰æ‰¾åˆ°

**è§£å†³æ–¹æ¡ˆ**ï¼š
- è¿™ä¸åº”è¯¥å‘ç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬å…ˆæŸ¥è¯¢å†æ’å…¥
- å¯èƒ½æ˜¯å¹¶å‘é—®é¢˜

### é—®é¢˜ 4: ç½‘ç»œé”™è¯¯

**ç—‡çŠ¶**ï¼š
```
Error message: "Failed to fetch"
æˆ–
Error message: "Network request failed"
```

**åŸå› **ï¼š
- ç½‘ç»œè¿æ¥é—®é¢˜
- Supabase æœåŠ¡ä¸å¯ç”¨
- CORS é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥ Supabase é¡¹ç›®çŠ¶æ€
- æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. âœ… **æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰**
2. âœ… **åˆ‡æ¢åˆ° Console æ ‡ç­¾é¡µ**
3. âœ… **æ¸…ç©ºæ—¥å¿—**
4. âœ… **åˆ·æ–°é¡µé¢ï¼ˆF5ï¼‰**
5. âœ… **é‡æ–°ç™»å½•**
6. âœ… **æŸ¥çœ‹ Console è¾“å‡º**
7. âœ… **æˆªå›¾æ‰€æœ‰æ—¥å¿—**
8. âœ… **å‘é€æˆªå›¾ç»™æˆ‘**

### æˆªå›¾è¦æ±‚

- **æ¸…æ™°åº¦**ï¼šç¡®ä¿æ–‡å­—æ¸…æ™°å¯è¯»
- **å®Œæ•´æ€§**ï¼šåŒ…æ‹¬æ‰€æœ‰ç›¸å…³æ—¥å¿—
- **é‡ç‚¹**ï¼šç‰¹åˆ«æ³¨æ„é”™è¯¯ä¿¡æ¯
- **æ ¼å¼**ï¼šPNG æˆ– JPG æ ¼å¼

---

## ğŸ“ å¦‚ä½•æä¾›ä¿¡æ¯

### æ–¹å¼ 1: æˆªå›¾

1. æˆªå–å®Œæ•´çš„ Console è¾“å‡º
2. ç¡®ä¿åŒ…å«æ‰€æœ‰ `[upsertUser]` æ—¥å¿—
3. å‘é€æˆªå›¾

### æ–¹å¼ 2: å¤åˆ¶æ–‡æœ¬

1. åœ¨ Console ä¸­å³é”®ç‚¹å‡»æ—¥å¿—
2. é€‰æ‹©"Copy"æˆ–"å¤åˆ¶"
3. ç²˜è´´åˆ°æ–‡æœ¬æ–‡ä»¶
4. å‘é€æ–‡æœ¬å†…å®¹

### æ–¹å¼ 3: å¯¼å‡ºæ—¥å¿—

1. åœ¨ Console ä¸­å³é”®
2. é€‰æ‹©"Save as..."æˆ–"å¦å­˜ä¸º..."
3. ä¿å­˜ä¸ºæ–‡ä»¶
4. å‘é€æ–‡ä»¶

---

## ğŸŠ æ€»ç»“

ç°åœ¨ä»£ç å·²ç»æ·»åŠ äº†éå¸¸è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡†ç¡®å®šä½é—®é¢˜ã€‚

**è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œå¹¶å°† Console çš„è¾“å‡ºæˆªå›¾å‘é€ç»™æˆ‘ã€‚**

æœ‰äº†è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘å°±èƒ½å‡†ç¡®åœ°æ‰¾åˆ°é—®é¢˜å¹¶æä¾›æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚

---

**é‡è¦æç¤º**ï¼š
- ä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤
- ç¡®ä¿æˆªå›¾åŒ…å«å®Œæ•´çš„æ—¥å¿—
- ç‰¹åˆ«æ³¨æ„ `Error code` å’Œ `Error message`
- å¦‚æœæœ‰å¤šæ¡é”™è¯¯ï¼Œè¯·å…¨éƒ¨æˆªå›¾

**ç­‰å¾…æ‚¨çš„æˆªå›¾ï¼** ğŸ“¸
