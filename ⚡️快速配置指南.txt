
              ✅ 认证系统已更换 - 快速配置指南                        ║


                          🎉 完成状态                                  │


  ✅ 已移除 Supabase Auth 依赖
  ✅ 已实现自定义 JWT 认证
  ✅ 3 个 Edge Functions 已部署
  ✅ 前端代码已更新
  ✅ 代码检查通过（0 errors）
  
  ⚠️ 需要配置 Resend API Key 才能发送邮件


                    步骤 1: 获取 Resend API Key                        │


  1. 访问: https://resend.com
  
  2. 注册账号（使用 GitHub 或邮箱）
  
  3. 进入 Dashboard → API Keys
  
  4. 点击 "Create API Key"
     - 名称: Production
     - 权限: Sending access
  
  5. 复制 API Key（以 re_ 开头）
     ⚠️ 只显示一次，请立即复制！


                    步骤 2: 配置到 Supabase                            │


  1. 打开 Supabase Dashboard
     https://supabase.com/dashboard/project/zrfnnerdaijcmhlemqld
  
  2. Settings → Edge Functions → Secrets
  
  3. 找到 RESEND_API_KEY
  
  4. 点击 Edit
  
  5. 粘贴您的 Resend API Key
  
  6. 保存


                    步骤 3: 测试登录功能                               │


  1. 打开应用登录页面
  
  2. 输入您的邮箱
  
  3. 点击"发送验证码"
  
  4. 检查邮箱（包括垃圾邮件）
  
  5. 输入6位验证码
  
  6. 点击"验证登录"
  
  7. 成功！🎉


                    🔐 安全提示（重要！）                              │


  当前 JWT Secret 是临时密钥，生产环境必须更换！
  
  如何更换:
    1. 生成强随机密钥（至少32字符）
       openssl rand -base64 32
    
    2. 在 Supabase Dashboard 中更新
       Settings → Edge Functions → Secrets → JWT_SECRET
    
    3. 保存新密钥


                    📧 邮件配置（可选）                                │


  使用默认域名:
    ✅ 立即可用
    ✅ 无需配置
    ⚠️ 发件人: onboarding@resend.dev
  
  使用自定义域名:
    1. Resend Dashboard → Domains
    2. Add Domain → 输入您的域名
    3. 添加 DNS 记录
    4. 等待验证通过
    5. 更新 Edge Function 中的 from 字段


                    🔍 故障排查                                        │


  问题: 验证码发送失败
    → 检查 RESEND_API_KEY 是否已配置
    → 确保 API Key 以 re_ 开头
  
  问题: 验证码无效或已过期
    → 重新发送验证码
    → 确保在5分钟内使用
  
  问题: JWT 配置错误
    → 检查 JWT_SECRET 是否已配置
    → 确保至少32个字符


                    💡 系统架构说明                                    │


  Edge Functions:
    1. send-verification-code
       → 生成6位验证码
       → 存储到数据库
       → 通过 Resend 发送邮件
    
    2. verify-code-and-login
       → 验证验证码
       → 创建或获取用户
       → 生成 JWT token (30天有效)
    
    3. verify-token
       → 验证 JWT token
       → 返回用户信息

  前端:
    → AuthContext 管理认证状态
    → Token 存储在 localStorage
    → 自动验证和刷新

  数据库:
    → users 表: 用户信息
    → verification_codes 表: 验证码记录


                    ✅ 完成检查清单                                    │


  [ ] Resend API Key 已配置
  [ ] JWT Secret 已配置（生产环境需更换）
  [ ] 测试发送验证码成功
  [ ] 测试验证登录成功
  [ ] 测试 token 验证成功
  [ ] 测试登出功能正常


              现在就去配置 Resend API Key 吧！🚀                     ║
                                                                      ║
    访问: https://resend.com                                          ║
    注册 → 创建 API Key → 配置到 Supabase                             ║

: ✅认证系统已更换完成.md
