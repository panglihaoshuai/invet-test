# 🚀 快速开始 - 5分钟测试指南

> 最简单的测试流程，让您快速体验所有功能

---

## 第一步：设置管理员（1分钟）

### 1. 登录应用
- 打开应用
- 输入邮箱：`admin@test.com`
- 点击"发送验证码"
- 输入显示的验证码
- 点击"验证登录"

### 2. 设置管理员权限
打开 Supabase SQL Editor，执行：

```sql
UPDATE profiles SET role = 'admin'::user_role WHERE email = 'admin@test.com';
```

### 3. 验证
- 刷新页面（F5）
- 看到右上角"管理后台"按钮 ✅

---

## 第二步：生成礼品码（30秒）

1. 点击"管理后台"
2. 点击"礼品码管理"
3. 最大兑换次数：输入 `10`
4. 有效期：留空
5. 点击"生成礼品码"
6. 点击"复制"按钮

**礼品码已复制！** 例如：`ABC12345`

---

## 第三步：测试礼品码（2分钟）

### 1. 切换用户
- 点击右上角邮箱 → 退出登录
- 输入新邮箱：`user@test.com`
- 登录

### 2. 完成测试
- 点击"开始测试"
- 快速完成所有测试题（可以随意选择）
- 提交所有测试

### 3. 兑换礼品码
- 在结果页面，点击"有礼品码？点击兑换"
- 粘贴礼品码：`ABC12345`
- 点击"兑换"
- 看到"🎁 您有 1 次免费分析机会" ✅

### 4. 使用免费次数
- 点击"使用免费次数"
- 等待几秒
- 看到完整的 AI 分析报告 ✅

---

## 第四步：测试付费（1分钟）

### 1. 创建订单
- 使用新邮箱登录：`buyer@test.com`
- 完成所有测试
- 点击"立即购买"（价格：¥3.99）

### 2. 模拟支付
在 Supabase SQL Editor 执行：

```sql
-- 查看最新订单ID
SELECT id FROM orders ORDER BY created_at DESC LIMIT 1;

-- 复制订单ID，然后执行（替换'订单ID'）
UPDATE orders SET status = 'completed', completed_at = now() WHERE id = '订单ID';
```

### 3. 验证
- 刷新结果页面
- 看到 AI 分析报告 ✅

---

## 第五步：验证价格递减（30秒）

1. 使用同一账号（`buyer@test.com`）
2. 重新完成测试
3. 查看价格：应该是 ¥2.99 ✅
4. 再次购买并支付
5. 第三次测试，价格应该是 ¥1.99 ✅

---

## 完成！🎉

您已经测试了所有核心功能：
- ✅ 登录系统
- ✅ 管理员权限
- ✅ 礼品码生成
- ✅ 礼品码兑换
- ✅ 免费分析
- ✅ 付费购买
- ✅ 价格递减

---

## 常用命令速查

### 设置管理员
```sql
UPDATE profiles SET role = 'admin'::user_role WHERE email = 'admin@test.com';
```

### 查看最新订单
```sql
SELECT id, status, amount FROM orders ORDER BY created_at DESC LIMIT 1;
```

### 完成订单支付
```sql
UPDATE orders SET status = 'completed', completed_at = now() WHERE id = '订单ID';
```

### 查看所有礼品码
```sql
SELECT code, current_redemptions, max_redemptions FROM gift_codes;
```

### 重置测试数据
```sql
DELETE FROM orders;
DELETE FROM gift_code_redemptions;
DELETE FROM gift_codes;
```

---

## 遇到问题？

### 看不到管理后台？
```sql
-- 确认角色
SELECT email, role FROM profiles WHERE email = 'admin@test.com';

-- 如果不是admin，重新设置
UPDATE profiles SET role = 'admin'::user_role WHERE email = 'admin@test.com';
```

### 礼品码兑换失败？
```sql
-- 检查礼品码状态
SELECT * FROM gift_codes WHERE code = 'ABC12345';

-- 激活礼品码
UPDATE gift_codes SET is_active = true WHERE code = 'ABC12345';
```

### 支付后没有分析？
```sql
-- 检查订单状态
SELECT id, status FROM orders ORDER BY created_at DESC LIMIT 1;

-- 手动完成订单
UPDATE orders SET status = 'completed', completed_at = now() WHERE id = '订单ID';
```

---

## 下一步

查看完整文档：`部署测试完整指南.md`

包含：
- 详细的功能说明
- 完整的测试流程
- 所有常见问题解答
- 数据管理命令
- 技术支持信息

---

**开始测试吧！** 🚀
