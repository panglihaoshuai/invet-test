# DeepSeek AI åˆ†æåŠŸèƒ½ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿé…ç½®

### æ­¥éª¤ 1: è·å– Stripe API å¯†é’¥

1. è®¿é—® [Stripe Dashboard](https://dashboard.stripe.com/register)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. è¿›å…¥ **Developers â†’ API keys**
4. å¤åˆ¶ **Secret key**ï¼ˆä»¥ `sk_test_` å¼€å¤´çš„æµ‹è¯•å¯†é’¥ï¼‰

### æ­¥éª¤ 2: è·å– DeepSeek API å¯†é’¥

1. è®¿é—® [DeepSeek Platform](https://platform.deepseek.com)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. è¿›å…¥ **API Keys** é¡µé¢
4. åˆ›å»ºæ–°çš„ API Key å¹¶å¤åˆ¶

### æ­¥éª¤ 3: é…ç½®æœ¬åœ°ç¯å¢ƒå˜é‡

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ï¼š

```bash
# å–æ¶ˆæ³¨é‡Šå¹¶å¡«å…¥ä½ çš„å¯†é’¥
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
DEEPSEEK_API_KEY=your_deepseek_api_key_here
```

### æ­¥éª¤ 4: é…ç½® Supabase Edge Functions

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ Supabase Dashboard**

1. è®¿é—® [Supabase Dashboard](https://supabase.com/dashboard)
2. é€‰æ‹©ä½ çš„é¡¹ç›®
3. è¿›å…¥ **Project Settings â†’ Edge Functions**
4. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
   - `STRIPE_SECRET_KEY`: ä½ çš„ Stripe å¯†é’¥
   - `DEEPSEEK_API_KEY`: ä½ çš„ DeepSeek å¯†é’¥

**æ–¹å¼äºŒï¼šä½¿ç”¨ Supabase CLI**

```bash
# å®‰è£… Supabase CLIï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install -g supabase

# ç™»å½•
supabase login

# è®¾ç½®å¯†é’¥
supabase secrets set STRIPE_SECRET_KEY=sk_test_your_key
supabase secrets set DEEPSEEK_API_KEY=your_key
```

### æ­¥éª¤ 5: æµ‹è¯•åŠŸèƒ½

1. **å¯åŠ¨åº”ç”¨**ï¼ˆå¦‚æœè¿˜æ²¡å¯åŠ¨ï¼‰
   ```bash
   npm run dev
   ```

2. **å®Œæˆæµ‹è¯„**
   - è®¿é—®åº”ç”¨é¦–é¡µ
   - ç™»å½•è´¦å·
   - å®Œæˆæ‰€æœ‰æµ‹è¯•ï¼ˆäººæ ¼ã€æ•°å­¦é‡‘èã€é£é™©åå¥½ã€äº¤æ˜“ç‰¹å¾ï¼‰

3. **æµ‹è¯•æ”¯ä»˜**
   - åœ¨ç»“æœé¡µé¢æ‰¾åˆ° "è§£é” AI æ·±åº¦åˆ†æ" å¡ç‰‡
   - ç‚¹å‡» "ç«‹å³è´­ä¹°æ·±åº¦åˆ†æ"
   - ä½¿ç”¨æµ‹è¯•å¡å·ï¼š`4242 4242 4242 4242`
   - è¿‡æœŸæ—¥æœŸï¼šä»»æ„æœªæ¥æ—¥æœŸ
   - CVCï¼šä»»æ„3ä½æ•°å­—

4. **æŸ¥çœ‹åˆ†æ**
   - æ”¯ä»˜æˆåŠŸåä¼šè‡ªåŠ¨è·³è½¬
   - ç­‰å¾… DeepSeek AI ç”Ÿæˆåˆ†æï¼ˆçº¦10-30ç§’ï¼‰
   - åœ¨ç»“æœé¡µé¢æŸ¥çœ‹å®Œæ•´çš„ä¸“ä¸šåˆ†ææŠ¥å‘Š

## âœ… éªŒè¯æ¸…å•

é…ç½®å®Œæˆåï¼Œè¯·ç¡®è®¤ä»¥ä¸‹å†…å®¹ï¼š

- [ ] `.env` æ–‡ä»¶ä¸­å·²å¡«å…¥ `STRIPE_SECRET_KEY`
- [ ] `.env` æ–‡ä»¶ä¸­å·²å¡«å…¥ `DEEPSEEK_API_KEY`
- [ ] Supabase Edge Functions ä¸­å·²é…ç½®ä¸¤ä¸ªå¯†é’¥
- [ ] èƒ½å¤ŸæˆåŠŸåˆ›å»ºæ”¯ä»˜ä¼šè¯ï¼ˆç‚¹å‡»è´­ä¹°æŒ‰é’®åæ‰“å¼€ Stripe é¡µé¢ï¼‰
- [ ] èƒ½å¤Ÿå®Œæˆæµ‹è¯•æ”¯ä»˜
- [ ] æ”¯ä»˜æˆåŠŸåèƒ½çœ‹åˆ°æˆåŠŸé¡µé¢
- [ ] DeepSeek åˆ†æèƒ½å¤Ÿæ­£å¸¸ç”Ÿæˆ
- [ ] åœ¨ç»“æœé¡µé¢èƒ½çœ‹åˆ°å®Œæ•´çš„åˆ†ææŠ¥å‘Š

## ğŸ§ª æµ‹è¯•å¡å·

Stripe æä¾›ä»¥ä¸‹æµ‹è¯•å¡å·ï¼š

| å¡å· | ç»“æœ |
|------|------|
| 4242 4242 4242 4242 | æ”¯ä»˜æˆåŠŸ |
| 4000 0000 0000 0002 | å¡è¢«æ‹’ç» |
| 4000 0000 0000 9995 | èµ„é‡‘ä¸è¶³ |
| 4000 0025 0000 3155 | éœ€è¦ 3D Secure éªŒè¯ |

**å…¶ä»–ä¿¡æ¯**ï¼š
- è¿‡æœŸæ—¥æœŸï¼šä»»æ„æœªæ¥æ—¥æœŸï¼ˆå¦‚ 12/25ï¼‰
- CVCï¼šä»»æ„3ä½æ•°å­—ï¼ˆå¦‚ 123ï¼‰
- é‚®ç¼–ï¼šä»»æ„5ä½æ•°å­—ï¼ˆå¦‚ 12345ï¼‰

## ğŸ“Š åŠŸèƒ½éªŒè¯

### 1. æ”¯ä»˜æµç¨‹éªŒè¯

```bash
# æ£€æŸ¥è®¢å•æ˜¯å¦åˆ›å»º
# åœ¨ Supabase Dashboard â†’ Table Editor â†’ orders
# åº”è¯¥èƒ½çœ‹åˆ°æ–°åˆ›å»ºçš„è®¢å•è®°å½•ï¼Œstatus ä¸º 'pending'

# å®Œæˆæ”¯ä»˜å
# status åº”è¯¥å˜ä¸º 'completed'
# completed_at åº”è¯¥æœ‰æ—¶é—´æˆ³
```

### 2. åˆ†æç”ŸæˆéªŒè¯

```bash
# æ£€æŸ¥åˆ†ææ˜¯å¦ç”Ÿæˆ
# åœ¨ Supabase Dashboard â†’ Table Editor â†’ deepseek_analyses
# åº”è¯¥èƒ½çœ‹åˆ°æ–°ç”Ÿæˆçš„åˆ†æè®°å½•
# analysis_content å­—æ®µåŒ…å«å®Œæ•´çš„åˆ†ææ–‡æœ¬
```

### 3. Edge Functions æ—¥å¿—

```bash
# æŸ¥çœ‹ Edge Functions æ—¥å¿—ï¼ˆå¦‚æœæœ‰é—®é¢˜ï¼‰
supabase functions logs create_stripe_checkout
supabase functions logs verify_stripe_payment
supabase functions logs generate_deepseek_analysis
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: ç‚¹å‡»è´­ä¹°æŒ‰é’®åæ²¡æœ‰ååº”ï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
- Stripe å¯†é’¥æœªé…ç½®æˆ–é…ç½®é”™è¯¯
- Edge Function æœªéƒ¨ç½²æˆ–é…ç½®é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `STRIPE_SECRET_KEY`
2. æ£€æŸ¥ Supabase Edge Functions ç¯å¢ƒå˜é‡
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
4. æŸ¥çœ‹ Edge Function æ—¥å¿—

### Q2: æ”¯ä»˜æˆåŠŸä½†åˆ†ææœªç”Ÿæˆï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
- DeepSeek API å¯†é’¥æœªé…ç½®æˆ–é…ç½®é”™è¯¯
- DeepSeek API é…é¢ä¸è¶³
- ç½‘ç»œé—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `DEEPSEEK_API_KEY`
2. æ£€æŸ¥ Supabase Edge Functions ç¯å¢ƒå˜é‡
3. æŸ¥çœ‹ Edge Function æ—¥å¿—ï¼š`supabase functions logs generate_deepseek_analysis`
4. æ£€æŸ¥ DeepSeek è´¦æˆ·ä½™é¢å’Œé…é¢

### Q3: å¦‚ä½•æŸ¥çœ‹ Edge Function é”™è¯¯ï¼Ÿ

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
supabase functions logs create_stripe_checkout --tail

# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
supabase functions logs create_stripe_checkout --limit 50
```

### Q4: å¦‚ä½•é‡æ–°éƒ¨ç½² Edge Functionsï¼Ÿ

å¦‚æœä¿®æ”¹äº† Edge Function ä»£ç æˆ–é…ç½®ï¼š

```bash
# é‡æ–°éƒ¨ç½²å•ä¸ªå‡½æ•°
supabase functions deploy create_stripe_checkout

# é‡æ–°éƒ¨ç½²æ‰€æœ‰å‡½æ•°
supabase functions deploy create_stripe_checkout
supabase functions deploy verify_stripe_payment
supabase functions deploy generate_deepseek_analysis
```

### Q5: æµ‹è¯•ç¯å¢ƒå¦‚ä½•åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒï¼Ÿ

1. **è·å–ç”Ÿäº§å¯†é’¥**
   - Stripe: ä½¿ç”¨ `sk_live_` å¼€å¤´çš„å¯†é’¥
   - DeepSeek: ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒçš„ API Key

2. **æ›´æ–°é…ç½®**
   - æ›´æ–° `.env` æ–‡ä»¶
   - æ›´æ–° Supabase Edge Functions ç¯å¢ƒå˜é‡

3. **æµ‹è¯•éªŒè¯**
   - ä½¿ç”¨çœŸå®å¡å·è¿›è¡Œå°é¢æµ‹è¯•
   - éªŒè¯æ”¯ä»˜å’Œåˆ†æç”Ÿæˆæµç¨‹

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å®‰å…¨æ€§

- âœ… **æ°¸è¿œä¸è¦**å°† API å¯†é’¥æäº¤åˆ° Git ä»“åº“
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… å®šæœŸè½®æ¢ API å¯†é’¥
- âœ… åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPS

### 2. æˆæœ¬æ§åˆ¶

- âœ… åœ¨æµ‹è¯•é˜¶æ®µä½¿ç”¨ Stripe æµ‹è¯•æ¨¡å¼
- âœ… ç›‘æ§ DeepSeek API ä½¿ç”¨é‡
- âœ… è®¾ç½® API è°ƒç”¨é™åˆ¶
- âœ… å®ç°åˆ†æç»“æœç¼“å­˜ï¼ˆå·²å®ç°ï¼‰

### 3. ç”¨æˆ·ä½“éªŒ

- âœ… æä¾›æ¸…æ™°çš„æ”¯ä»˜æµç¨‹è¯´æ˜
- âœ… æ˜¾ç¤ºæ”¯ä»˜è¿›åº¦å’ŒçŠ¶æ€
- âœ… å¤„ç†æ”¯ä»˜å¤±è´¥æƒ…å†µ
- âœ… æä¾›å‹å¥½çš„é”™è¯¯æç¤º

### 4. ç›‘æ§å’Œç»´æŠ¤

- âœ… å®šæœŸæ£€æŸ¥ Edge Function æ—¥å¿—
- âœ… ç›‘æ§æ”¯ä»˜æˆåŠŸç‡
- âœ… ç›‘æ§åˆ†æç”ŸæˆæˆåŠŸç‡
- âœ… æ”¶é›†ç”¨æˆ·åé¦ˆ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. åˆ†æç¼“å­˜

ç³»ç»Ÿå·²å®ç°åˆ†æç»“æœç¼“å­˜ï¼š
- é¦–æ¬¡ç”Ÿæˆåä¿å­˜åˆ°æ•°æ®åº“
- åç»­è®¿é—®ç›´æ¥ä»æ•°æ®åº“è¯»å–
- é¿å…é‡å¤è°ƒç”¨ DeepSeek API

### 2. å¼‚æ­¥å¤„ç†

- æ”¯ä»˜éªŒè¯åç«‹å³è¿”å›æˆåŠŸé¡µé¢
- åˆ†æç”Ÿæˆåœ¨åå°å¼‚æ­¥è¿›è¡Œ
- ç”¨æˆ·å¯ä»¥å…ˆæŸ¥çœ‹åŸºç¡€æŠ¥å‘Š

### 3. é”™è¯¯é‡è¯•

å¦‚æœåˆ†æç”Ÿæˆå¤±è´¥ï¼š
- ç”¨æˆ·å¯ä»¥åœ¨ç»“æœé¡µé¢æ‰‹åŠ¨é‡è¯•
- ç³»ç»Ÿä¼šæ£€æŸ¥æ˜¯å¦å·²æ”¯ä»˜
- ä¸ä¼šé‡å¤æ‰£è´¹

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ–‡æ¡£**
   - `DEEPSEEK_INTEGRATION.md` - å®Œæ•´æŠ€æœ¯æ–‡æ¡£
   - `PAYMENT_FLOW.md` - æµç¨‹å›¾å’Œæ¶æ„è¯´æ˜
   - `IMPLEMENTATION_SUMMARY.md` - åŠŸèƒ½æ€»ç»“

2. **æ£€æŸ¥æ—¥å¿—**
   - æµè§ˆå™¨æ§åˆ¶å°
   - Supabase Edge Functions æ—¥å¿—
   - Stripe Dashboard äº‹ä»¶æ—¥å¿—

3. **è°ƒè¯•å·¥å…·**
   - Stripe Dashboard â†’ Events
   - Supabase Dashboard â†’ Logs
   - DeepSeek Platform â†’ Usage

## ğŸ¯ ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. **è‡ªå®šä¹‰åˆ†æå†…å®¹**
   - ä¿®æ”¹ `generate_deepseek_analysis/index.ts` ä¸­çš„æç¤ºè¯
   - è°ƒæ•´åˆ†æçš„ç»“æ„å’Œé‡ç‚¹

2. **è°ƒæ•´ä»·æ ¼**
   - ä¿®æ”¹ `PurchaseAnalysisCard.tsx` ä¸­çš„ä»·æ ¼æ˜¾ç¤º
   - æ›´æ–° `createCheckoutSession` è°ƒç”¨ä¸­çš„é‡‘é¢

3. **æ·»åŠ æ›´å¤šåŠŸèƒ½**
   - æ”¯æŒå¤šç§åˆ†æå¥—é¤
   - æ·»åŠ ä¼˜æƒ åˆ¸ç³»ç»Ÿ
   - å®ç°æ¨èå¥–åŠ±

4. **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**
   - æ·»åŠ åˆ†æé¢„è§ˆ
   - æ”¯æŒ PDF å¯¼å‡º
   - æ·»åŠ åˆ†äº«åŠŸèƒ½

---

**é…ç½®å®Œæˆï¼** ğŸ‰

ç°åœ¨ä½ çš„æŠ•èµ„å¿ƒç†æµ‹è¯„ç³»ç»Ÿå·²ç»å®Œå…¨é›†æˆäº† DeepSeek AI æ·±åº¦åˆ†æåŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ”¯ä»˜ Â¥3.99 è·å–ä¸“ä¸šçš„æŠ•èµ„å¿ƒç†åˆ†ææŠ¥å‘Šã€‚

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒä¸Šè¿°æ–‡æ¡£æˆ–æŸ¥çœ‹ Edge Function æ—¥å¿—ã€‚
