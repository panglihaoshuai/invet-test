# äººæ ¼ç‰¹è´¨æŠ•èµ„ç­–ç•¥è¯„ä¼°ç³»ç»Ÿ - å®Œæ•´éƒ¨ç½²æµ‹è¯•æŒ‡å—

> ğŸ¯ æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨ä»é›¶å¼€å§‹éƒ¨ç½²ã€é…ç½®å’Œæµ‹è¯•æ•´ä¸ªç³»ç»Ÿï¼Œæ— éœ€ä»»ä½•æŠ€æœ¯èƒŒæ™¯

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿç®€ä»‹](#ç³»ç»Ÿç®€ä»‹)
2. [å‰ç½®å‡†å¤‡](#å‰ç½®å‡†å¤‡)
3. [éƒ¨ç½²æ­¥éª¤](#éƒ¨ç½²æ­¥éª¤)
4. [ç®¡ç†å‘˜è®¾ç½®](#ç®¡ç†å‘˜è®¾ç½®)
5. [åŠŸèƒ½æµ‹è¯•](#åŠŸèƒ½æµ‹è¯•)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [æ•°æ®ç®¡ç†](#æ•°æ®ç®¡ç†)

---

## ç³»ç»Ÿç®€ä»‹

### ç³»ç»ŸåŠŸèƒ½
- âœ… é‚®ç®±éªŒè¯ç ç™»å½•
- âœ… äººæ ¼ç‰¹è´¨æµ‹è¯„ï¼ˆBig Fiveæ¨¡å‹ï¼‰
- âœ… äº¤æ˜“ç‰¹å¾è¯„ä¼°
- âœ… æ•°å­¦é‡‘èèƒ½åŠ›æµ‹è¯•
- âœ… é£é™©åå¥½è¯„ä¼°
- âœ… æŠ•èµ„ç­–ç•¥åŒ¹é…
- âœ… AIæ·±åº¦åˆ†ææŠ¥å‘Šï¼ˆä»˜è´¹åŠŸèƒ½ï¼‰
- âœ… ç¤¼å“ç ç³»ç»Ÿ
- âœ… é€’å‡ä»·æ ¼ç­–ç•¥
- âœ… ç®¡ç†åå°

### æŠ€æœ¯æ¶æ„
- å‰ç«¯ï¼šReact + TypeScript + Tailwind CSS
- åç«¯ï¼šSupabaseï¼ˆæ•°æ®åº“ + è®¤è¯ï¼‰
- éƒ¨ç½²ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ˆå·²é…ç½®ï¼‰

---

## å‰ç½®å‡†å¤‡

### æ‚¨éœ€è¦çš„è´¦å·
1. **Supabase è´¦å·**ï¼ˆå·²é…ç½®ï¼‰
   - é¡¹ç›®åœ°å€ï¼šhttps://ahgnspudsmrvsqcinxcj.supabase.co
   - å·²è‡ªåŠ¨é…ç½®åœ¨ `.env` æ–‡ä»¶ä¸­

### æ‚¨éœ€è¦å‡†å¤‡çš„ä¿¡æ¯
1. **ç®¡ç†å‘˜é‚®ç®±**ï¼šç”¨äºç™»å½•ç®¡ç†åå°ï¼ˆä¾‹å¦‚ï¼šadmin@test.comï¼‰
2. **æµ‹è¯•ç”¨æˆ·é‚®ç®±**ï¼šç”¨äºæµ‹è¯•æ™®é€šç”¨æˆ·åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šuser@test.comï¼‰

---

## éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç¡®è®¤ç¯å¢ƒé…ç½®

ç³»ç»Ÿå·²ç»è‡ªåŠ¨é…ç½®å¥½ï¼Œæ‚¨åªéœ€ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š

```bash
# æŸ¥çœ‹ç¯å¢ƒå˜é‡é…ç½®
cat .env
```

åº”è¯¥çœ‹åˆ°ï¼š
```
VITE_SUPABASE_URL=https://ahgnspudsmrvsqcinxcj.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGc...ï¼ˆé•¿å­—ç¬¦ä¸²ï¼‰
VITE_APP_ID=app-7gjbw3zqrmdd
VITE_API_ENV=production
```

âœ… å¦‚æœçœ‹åˆ°ä»¥ä¸Šå†…å®¹ï¼Œè¯´æ˜é…ç½®æ­£ç¡®ï¼

### ç¬¬äºŒæ­¥ï¼šè®¿é—® Supabase æ§åˆ¶å°

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼šhttps://supabase.com/dashboard
2. ç™»å½•æ‚¨çš„ Supabase è´¦å·
3. é€‰æ‹©é¡¹ç›®ï¼š`ahgnspudsmrvsqcinxcj`
4. ç‚¹å‡»å·¦ä¾§èœå•çš„ **SQL Editor**

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ•°æ®åº“è¡¨

åœ¨ SQL Editor ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®è®¤æ‰€æœ‰è¡¨éƒ½å·²åˆ›å»ºï¼š

```sql
-- æŸ¥çœ‹æ‰€æœ‰è¡¨
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
ORDER BY table_name;
```

åº”è¯¥çœ‹åˆ°ä»¥ä¸‹è¡¨ï¼š
- âœ… usersï¼ˆç”¨æˆ·è¡¨ï¼‰
- âœ… profilesï¼ˆç”¨æˆ·èµ„æ–™è¡¨ï¼‰
- âœ… verification_codesï¼ˆéªŒè¯ç è¡¨ï¼‰
- âœ… test_resultsï¼ˆæµ‹è¯•ç»“æœè¡¨ï¼‰
- âœ… test_submissionsï¼ˆæµ‹è¯•æäº¤è¡¨ï¼‰
- âœ… reportsï¼ˆæŠ¥å‘Šè¡¨ï¼‰
- âœ… ordersï¼ˆè®¢å•è¡¨ï¼‰
- âœ… gift_codesï¼ˆç¤¼å“ç è¡¨ï¼‰
- âœ… gift_code_redemptionsï¼ˆç¤¼å“ç å…‘æ¢è¡¨ï¼‰
- âœ… deepseek_analysesï¼ˆAIåˆ†æè¡¨ï¼‰
- âœ… user_pricing_infoï¼ˆç”¨æˆ·å®šä»·è¡¨ï¼‰
- âœ… system_configï¼ˆç³»ç»Ÿé…ç½®è¡¨ï¼‰

âœ… å¦‚æœçœ‹åˆ°ä»¥ä¸Šæ‰€æœ‰è¡¨ï¼Œè¯´æ˜æ•°æ®åº“å·²æ­£ç¡®åˆå§‹åŒ–ï¼

### ç¬¬å››æ­¥ï¼šå¯åŠ¨åº”ç”¨

åº”ç”¨å·²è‡ªåŠ¨éƒ¨ç½²ï¼Œæ‚¨å¯ä»¥ç›´æ¥è®¿é—®ã€‚å¦‚æœéœ€è¦æœ¬åœ°æµ‹è¯•ï¼š

```bash
# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

âœ… çœ‹åˆ° "Local: http://localhost:5173" è¯´æ˜å¯åŠ¨æˆåŠŸï¼

---

## ç®¡ç†å‘˜è®¾ç½®

### æ–¹æ³•ï¼šè®¾ç½®ç®¡ç†å‘˜è´¦å·ï¼ˆå¿…é¡»å®Œæˆï¼‰

#### æ­¥éª¤1ï¼šæ³¨å†Œç®¡ç†å‘˜è´¦å·

1. æ‰“å¼€åº”ç”¨é¦–é¡µ
2. ç‚¹å‡»å³ä¸Šè§’"ç™»å½•"æŒ‰é’®
3. è¾“å…¥æ‚¨çš„ç®¡ç†å‘˜é‚®ç®±ï¼ˆä¾‹å¦‚ï¼šadmin@test.comï¼‰
4. ç‚¹å‡»"å‘é€éªŒè¯ç "
5. åœ¨æç¤ºæ¶ˆæ¯ä¸­æŸ¥çœ‹éªŒè¯ç ï¼ˆæ¼”ç¤ºæ¨¡å¼ä¼šç›´æ¥æ˜¾ç¤ºï¼‰
6. è¾“å…¥éªŒè¯ç ï¼Œç‚¹å‡»"éªŒè¯ç™»å½•"

âœ… ç™»å½•æˆåŠŸåï¼Œæ‚¨ä¼šçœ‹åˆ°ç³»ç»Ÿé¦–é¡µ

#### æ­¥éª¤2ï¼šè®¾ç½®ç®¡ç†å‘˜æƒé™

1. è¿”å› Supabase SQL Editor
2. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆ**æ›¿æ¢é‚®ç®±ä¸ºæ‚¨çš„å®é™…é‚®ç®±**ï¼‰ï¼š

```sql
-- ğŸ”¥ é‡è¦ï¼šå°† 'admin@test.com' æ›¿æ¢ä¸ºæ‚¨åˆšæ‰æ³¨å†Œçš„é‚®ç®±
DO $$
DECLARE
  admin_email_value text := 'admin@test.com';  -- ğŸ‘ˆ ä¿®æ”¹è¿™é‡Œï¼
BEGIN
  -- æ›´æ–°ç³»ç»Ÿé…ç½®
  UPDATE system_config 
  SET config_value = admin_email_value 
  WHERE config_key = 'admin_email';
  
  -- æ›´æ–°ç”¨æˆ·è§’è‰²
  UPDATE profiles 
  SET role = 'admin'::user_role 
  WHERE email = admin_email_value;
  
  RAISE NOTICE 'âœ… ç®¡ç†å‘˜è®¾ç½®æˆåŠŸï¼é‚®ç®±: %', admin_email_value;
END $$;
```

#### æ­¥éª¤3ï¼šéªŒè¯ç®¡ç†å‘˜æƒé™

1. åˆ·æ–°åº”ç”¨é¡µé¢ï¼ˆæŒ‰ F5ï¼‰
2. æŸ¥çœ‹å³ä¸Šè§’ï¼Œåº”è¯¥çœ‹åˆ°"ç®¡ç†åå°"æŒ‰é’®
3. ç‚¹å‡»"ç®¡ç†åå°"ï¼Œè¿›å…¥ç®¡ç†ç•Œé¢

âœ… å¦‚æœèƒ½çœ‹åˆ°ç®¡ç†åå°ï¼Œè¯´æ˜ç®¡ç†å‘˜è®¾ç½®æˆåŠŸï¼

---

## åŠŸèƒ½æµ‹è¯•

### æµ‹è¯•1ï¼šç™»å½•åŠŸèƒ½

#### æµ‹è¯•æ­¥éª¤
1. æ‰“å¼€åº”ç”¨é¦–é¡µ
2. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
3. è¾“å…¥é‚®ç®±ï¼štest@example.com
4. ç‚¹å‡»"å‘é€éªŒè¯ç "
5. æŸ¥çœ‹æç¤ºæ¶ˆæ¯ä¸­çš„éªŒè¯ç ï¼ˆä¾‹å¦‚ï¼š123456ï¼‰
6. è¾“å…¥éªŒè¯ç 
7. ç‚¹å‡»"éªŒè¯ç™»å½•"

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤º"ç™»å½•æˆåŠŸ"æç¤º
- âœ… è·³è½¬åˆ°é¦–é¡µ
- âœ… å³ä¸Šè§’æ˜¾ç¤ºç”¨æˆ·é‚®ç®±

---

### æµ‹è¯•2ï¼šå®Œæ•´æµ‹è¯„æµç¨‹

#### æ­¥éª¤1ï¼šäººæ ¼æµ‹è¯•
1. åœ¨é¦–é¡µç‚¹å‡»"å¼€å§‹æµ‹è¯•"
2. é˜…è¯»è¯´æ˜ï¼Œç‚¹å‡»"å¼€å§‹æµ‹è¯•"
3. å›ç­”æ‰€æœ‰äººæ ¼æµ‹è¯•é—®é¢˜ï¼ˆå…±50é¢˜ï¼‰
4. ç‚¹å‡»"æäº¤æµ‹è¯•"

#### æ­¥éª¤2ï¼šäº¤æ˜“ç‰¹å¾æµ‹è¯•
1. å›ç­”æ‰€æœ‰äº¤æ˜“ç‰¹å¾é—®é¢˜
2. ç‚¹å‡»"ä¸‹ä¸€æ­¥"

#### æ­¥éª¤3ï¼šæ•°å­¦é‡‘èæµ‹è¯•
1. å›ç­”æ‰€æœ‰æ•°å­¦é‡‘èé—®é¢˜ï¼ˆå…±10é¢˜ï¼‰
2. ç‚¹å‡»"ä¸‹ä¸€æ­¥"

#### æ­¥éª¤4ï¼šé£é™©åå¥½æµ‹è¯•
1. å›ç­”æ‰€æœ‰é£é™©åå¥½é—®é¢˜
2. ç‚¹å‡»"æäº¤æµ‹è¯•"

#### é¢„æœŸç»“æœ
- âœ… è‡ªåŠ¨è·³è½¬åˆ°ç»“æœé¡µé¢
- âœ… æ˜¾ç¤ºæ‚¨çš„äººæ ¼ç‰¹è´¨åˆ†æ
- âœ… æ˜¾ç¤ºæŠ•èµ„é£æ ¼åŒ¹é…ç»“æœ
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„æŠ•èµ„å»ºè®®

---

### æµ‹è¯•3ï¼šç¤¼å“ç åŠŸèƒ½

#### A. ç”Ÿæˆç¤¼å“ç ï¼ˆç®¡ç†å‘˜æ“ä½œï¼‰

1. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
2. ç‚¹å‡»"ç®¡ç†åå°"
3. ç‚¹å‡»"ç¤¼å“ç ç®¡ç†"æ ‡ç­¾
4. åœ¨ç”ŸæˆåŒºåŸŸè®¾ç½®ï¼š
   - **æœ€å¤§å…‘æ¢æ¬¡æ•°**ï¼šè¾“å…¥ `1`ï¼ˆè¡¨ç¤ºåªèƒ½ä½¿ç”¨1æ¬¡ï¼‰
   - **æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰**ï¼šç•™ç©ºï¼ˆè¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆï¼‰
5. ç‚¹å‡»"ç”Ÿæˆç¤¼å“ç "æŒ‰é’®
6. çœ‹åˆ°æˆåŠŸæç¤ºï¼Œä¾‹å¦‚ï¼š"ç¤¼å“ç  ABC12345 å·²ç”Ÿæˆ"
7. ç‚¹å‡»ç¤¼å“ç æ—è¾¹çš„"å¤åˆ¶"æŒ‰é’®

âœ… ç¤¼å“ç å·²ç”Ÿæˆå¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼

#### B. å…‘æ¢ç¤¼å“ç ï¼ˆæ™®é€šç”¨æˆ·æ“ä½œï¼‰

1. **é€€å‡ºç™»å½•**ï¼ˆç‚¹å‡»å³ä¸Šè§’é‚®ç®± â†’ é€€å‡ºç™»å½•ï¼‰
2. ä½¿ç”¨æ–°é‚®ç®±ç™»å½•ï¼ˆä¾‹å¦‚ï¼šuser@test.comï¼‰
3. å®Œæˆæ‰€æœ‰æµ‹è¯•ï¼ˆäººæ ¼ã€äº¤æ˜“ç‰¹å¾ã€æ•°å­¦é‡‘èã€é£é™©åå¥½ï¼‰
4. åœ¨ç»“æœé¡µé¢ï¼Œæ‰¾åˆ°"è´­ä¹° DeepSeek AI åˆ†æ"å¡ç‰‡
5. ç‚¹å‡»"æœ‰ç¤¼å“ç ï¼Ÿç‚¹å‡»å…‘æ¢"
6. ç²˜è´´åˆšæ‰å¤åˆ¶çš„ç¤¼å“ç ï¼ˆä¾‹å¦‚ï¼šABC12345ï¼‰
7. ç‚¹å‡»"å…‘æ¢"æŒ‰é’®

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤º"å…‘æ¢æˆåŠŸï¼"æç¤º
- âœ… å¡ç‰‡é¡¶éƒ¨æ˜¾ç¤ºï¼š"ğŸ æ‚¨æœ‰ 1 æ¬¡å…è´¹åˆ†ææœºä¼š"

#### C. ä½¿ç”¨å…è´¹æ¬¡æ•°

1. åœ¨åŒä¸€é¡µé¢ï¼Œç‚¹å‡»"ä½¿ç”¨å…è´¹æ¬¡æ•°"æŒ‰é’®
2. ç­‰å¾…å‡ ç§’é’Ÿ

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤º"ä½¿ç”¨æˆåŠŸ"æç¤º
- âœ… é¡µé¢è‡ªåŠ¨åˆ·æ–°
- âœ… æ˜¾ç¤ºå®Œæ•´çš„ DeepSeek AI åˆ†ææŠ¥å‘Š
- âœ… åŒ…å«è¯¦ç»†çš„æŠ•èµ„å¿ƒç†åˆ†æ

---

### æµ‹è¯•4ï¼šä»˜è´¹åŠŸèƒ½

#### A. æŸ¥çœ‹ä»·æ ¼

1. ä½¿ç”¨æ–°ç”¨æˆ·ç™»å½•ï¼ˆä¾‹å¦‚ï¼šbuyer@test.comï¼‰
2. å®Œæˆæ‰€æœ‰æµ‹è¯•
3. åœ¨ç»“æœé¡µé¢æŸ¥çœ‹"è´­ä¹° DeepSeek AI åˆ†æ"å¡ç‰‡
4. æŸ¥çœ‹ä»·æ ¼æ˜¾ç¤º

#### é¢„æœŸç»“æœ
- âœ… é¦–æ¬¡è´­ä¹°æ˜¾ç¤ºï¼šÂ¥3.99
- âœ… æ˜¾ç¤º"é¦–æ¬¡è´­ä¹°"æ ‡ç­¾

#### B. åˆ›å»ºè®¢å•

1. ç‚¹å‡»"ç«‹å³è´­ä¹°"æŒ‰é’®
2. ç³»ç»Ÿä¼šåˆ›å»ºè®¢å•

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤º"æ­£åœ¨åˆ›å»ºè®¢å•..."
- âœ… è·³è½¬åˆ°æ”¯ä»˜é¡µé¢æˆ–æ˜¾ç¤ºè®¢å•ä¿¡æ¯

#### C. æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ

ç”±äºè¿™æ˜¯æ¼”ç¤ºç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ ‡è®°è®¢å•ä¸ºå·²å®Œæˆï¼š

1. è¿”å› Supabase SQL Editor
2. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æœ€æ–°è®¢å•ï¼š

```sql
-- æŸ¥çœ‹æœ€æ–°è®¢å•
SELECT 
  id,
  user_id,
  amount,
  status,
  created_at
FROM orders 
ORDER BY created_at DESC 
LIMIT 1;
```

3. å¤åˆ¶è®¢å•çš„ `id`ï¼ˆä¸€ä¸²UUIDï¼‰
4. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ ‡è®°è®¢å•ä¸ºå·²å®Œæˆï¼ˆ**æ›¿æ¢è®¢å•ID**ï¼‰ï¼š

```sql
-- ğŸ”¥ å°† 'è®¢å•ID' æ›¿æ¢ä¸ºä¸Šé¢æŸ¥è¯¢åˆ°çš„å®é™…è®¢å•ID
UPDATE orders 
SET 
  status = 'completed', 
  completed_at = now() 
WHERE id = 'è®¢å•ID';  -- ğŸ‘ˆ æ›¿æ¢è¿™é‡Œï¼
```

5. è¿”å›åº”ç”¨ï¼Œåˆ·æ–°ç»“æœé¡µé¢

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤º"æ”¯ä»˜æˆåŠŸ"æç¤º
- âœ… è‡ªåŠ¨ç”Ÿæˆ AI åˆ†ææŠ¥å‘Š
- âœ… æ˜¾ç¤ºå®Œæ•´çš„åˆ†æå†…å®¹

#### D. æµ‹è¯•ä»·æ ¼é€’å‡

1. ä½¿ç”¨åŒä¸€è´¦å·ï¼ˆbuyer@test.comï¼‰
2. è¿”å›é¦–é¡µï¼Œé‡æ–°å®Œæˆæ‰€æœ‰æµ‹è¯•
3. åœ¨ç»“æœé¡µé¢æŸ¥çœ‹ä»·æ ¼

#### é¢„æœŸç»“æœ
- âœ… ä»·æ ¼é™ä¸ºï¼šÂ¥2.99
- âœ… æ˜¾ç¤º"ç¬¬äºŒæ¬¡è´­ä¹°"æ ‡ç­¾

4. å†æ¬¡è´­ä¹°å¹¶å®Œæˆæ”¯ä»˜ï¼ˆé‡å¤æ­¥éª¤Cï¼‰
5. ç¬¬ä¸‰æ¬¡æµ‹è¯•æ—¶æŸ¥çœ‹ä»·æ ¼

#### é¢„æœŸç»“æœ
- âœ… ä»·æ ¼é™ä¸ºï¼šÂ¥1.99
- âœ… æ˜¾ç¤º"è€ç”¨æˆ·ä¼˜æƒ "æ ‡ç­¾

---

### æµ‹è¯•5ï¼šç®¡ç†åå°åŠŸèƒ½

#### A. æ¦‚è§ˆç»Ÿè®¡

1. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
2. è¿›å…¥"ç®¡ç†åå°"
3. æŸ¥çœ‹"æ¦‚è§ˆ"æ ‡ç­¾

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤ºæ€»ç”¨æˆ·æ•°
- âœ… æ˜¾ç¤ºæ€»æµ‹è¯•æ¬¡æ•°
- âœ… æ˜¾ç¤ºæ€»è®¢å•æ•°
- âœ… æ˜¾ç¤ºæ€»æ”¶å…¥
- âœ… æ˜¾ç¤ºç¤¼å“ç ç»Ÿè®¡

#### B. ç”¨æˆ·ç®¡ç†

1. ç‚¹å‡»"ç”¨æˆ·ç®¡ç†"æ ‡ç­¾
2. æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤ºæ‰€æœ‰æ³¨å†Œç”¨æˆ·
- âœ… æ˜¾ç¤ºç”¨æˆ·é‚®ç®±ã€è§’è‰²ã€æ³¨å†Œæ—¶é—´
- âœ… å¯ä»¥æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…

#### C. è®¢å•ç®¡ç†

1. ç‚¹å‡»"è®¢å•ç®¡ç†"æ ‡ç­¾
2. æŸ¥çœ‹è®¢å•åˆ—è¡¨

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤ºæ‰€æœ‰è®¢å•
- âœ… æ˜¾ç¤ºè®¢å•é‡‘é¢ã€çŠ¶æ€ã€æ—¶é—´
- âœ… å¯ä»¥ç­›é€‰è®¢å•çŠ¶æ€

#### D. ç¤¼å“ç ç®¡ç†

1. ç‚¹å‡»"ç¤¼å“ç ç®¡ç†"æ ‡ç­¾
2. æŸ¥çœ‹ç¤¼å“ç åˆ—è¡¨

#### é¢„æœŸç»“æœ
- âœ… æ˜¾ç¤ºæ‰€æœ‰ç”Ÿæˆçš„ç¤¼å“ç 
- âœ… æ˜¾ç¤ºä½¿ç”¨æƒ…å†µï¼ˆå·²ä½¿ç”¨/æ€»æ¬¡æ•°ï¼‰
- âœ… æ˜¾ç¤ºæ¿€æ´»çŠ¶æ€
- âœ… å¯ä»¥åœç”¨/æ¿€æ´»ç¤¼å“ç 

#### E. æµ‹è¯•ç¤¼å“ç åœç”¨

1. åœ¨ç¤¼å“ç åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ¿€æ´»çš„ç¤¼å“ç 
2. ç‚¹å‡»"åœç”¨"æŒ‰é’®
3. ä½¿ç”¨æ™®é€šç”¨æˆ·å°è¯•å…‘æ¢è¯¥ç¤¼å“ç 

#### é¢„æœŸç»“æœ
- âœ… å…‘æ¢å¤±è´¥
- âœ… æ˜¾ç¤º"ç¤¼å“ç å·²åœç”¨"é”™è¯¯æç¤º

4. è¿”å›ç®¡ç†åå°ï¼Œç‚¹å‡»"æ¿€æ´»"æŒ‰é’®
5. å†æ¬¡å°è¯•å…‘æ¢

#### é¢„æœŸç»“æœ
- âœ… å…‘æ¢æˆåŠŸ

---

## å¸¸è§é—®é¢˜

### Q1: ç™»å½•æ—¶æç¤º"éªŒè¯ç å‘é€å¤±è´¥"

**åŸå› **ï¼šæ•°æ®åº“è¡¨æœªåˆ›å»º

**è§£å†³æ–¹æ³•**ï¼š
1. è¿”å› Supabase SQL Editor
2. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```sql
-- åˆ›å»ºéªŒè¯ç è¡¨
CREATE TABLE IF NOT EXISTS verification_codes (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  email text NOT NULL,
  code text NOT NULL,
  expires_at timestamptz NOT NULL,
  used boolean DEFAULT false,
  created_at timestamptz DEFAULT now()
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_verification_codes_email ON verification_codes(email);
CREATE INDEX IF NOT EXISTS idx_verification_codes_expires_at ON verification_codes(expires_at);
```

3. åˆ·æ–°é¡µé¢ï¼Œé‡æ–°å°è¯•ç™»å½•

---

### Q2: çœ‹ä¸åˆ°"ç®¡ç†åå°"æŒ‰é’®

**åŸå› **ï¼šç”¨æˆ·è§’è‰²ä¸æ˜¯ç®¡ç†å‘˜

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®è®¤æ‚¨å·²æ‰§è¡Œç®¡ç†å‘˜è®¾ç½®æ­¥éª¤
2. åœ¨ Supabase SQL Editor æ‰§è¡Œï¼š

```sql
-- æŸ¥çœ‹æ‚¨çš„è§’è‰²
SELECT email, role FROM profiles WHERE email = 'your-email@example.com';
```

3. å¦‚æœ role ä¸æ˜¯ 'admin'ï¼Œæ‰§è¡Œï¼š

```sql
UPDATE profiles 
SET role = 'admin'::user_role 
WHERE email = 'your-email@example.com';
```

4. åˆ·æ–°é¡µé¢ï¼ˆCtrl+F5 æˆ– Cmd+Shift+Rï¼‰

---

### Q3: ç¤¼å“ç å…‘æ¢å¤±è´¥

**å¯èƒ½åŸå› å’Œè§£å†³æ–¹æ³•**ï¼š

#### åŸå› 1ï¼šç¤¼å“ç è¾“å…¥é”™è¯¯
- ç¤¼å“ç åŒºåˆ†å¤§å°å†™
- ç¡®ä¿æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼
- é‡æ–°å¤åˆ¶ç¤¼å“ç 

#### åŸå› 2ï¼šç¤¼å“ç å·²è¿‡æœŸ
æŸ¥è¯¢ç¤¼å“ç çŠ¶æ€ï¼š
```sql
SELECT * FROM gift_codes WHERE code = 'ABC12345';
```

å¦‚æœ `expires_at` å·²è¿‡æœŸï¼Œå»¶é•¿æœ‰æ•ˆæœŸï¼š
```sql
UPDATE gift_codes 
SET expires_at = now() + interval '30 days' 
WHERE code = 'ABC12345';
```

#### åŸå› 3ï¼šç¤¼å“ç å·²ç”¨å®Œ
æŸ¥è¯¢ä½¿ç”¨æƒ…å†µï¼š
```sql
SELECT 
  code,
  current_redemptions,
  max_redemptions
FROM gift_codes 
WHERE code = 'ABC12345';
```

å¦‚æœ `current_redemptions >= max_redemptions`ï¼Œå¢åŠ æ¬¡æ•°ï¼š
```sql
UPDATE gift_codes 
SET max_redemptions = max_redemptions + 10 
WHERE code = 'ABC12345';
```

#### åŸå› 4ï¼šç¤¼å“ç å·²åœç”¨
æ¿€æ´»ç¤¼å“ç ï¼š
```sql
UPDATE gift_codes 
SET is_active = true 
WHERE code = 'ABC12345';
```

---

### Q4: æ”¯ä»˜åæ²¡æœ‰ç”Ÿæˆåˆ†ææŠ¥å‘Š

**è§£å†³æ–¹æ³•**ï¼š

1. æ£€æŸ¥è®¢å•çŠ¶æ€ï¼š
```sql
SELECT id, status, completed_at 
FROM orders 
ORDER BY created_at DESC 
LIMIT 1;
```

2. å¦‚æœ status ä¸æ˜¯ 'completed'ï¼Œæ‰‹åŠ¨æ ‡è®°ï¼š
```sql
UPDATE orders 
SET status = 'completed', completed_at = now() 
WHERE id = 'è®¢å•ID';
```

3. åˆ·æ–°ç»“æœé¡µé¢

---

### Q5: ä»·æ ¼æ²¡æœ‰é€’å‡

**è§£å†³æ–¹æ³•**ï¼š

1. æ£€æŸ¥ç”¨æˆ·å®šä»·ä¿¡æ¯ï¼š
```sql
SELECT 
  p.email,
  upi.completed_analyses,
  upi.next_price / 100.0 as next_price_yuan
FROM user_pricing_info upi
JOIN profiles p ON upi.user_id = p.id
WHERE p.email = 'buyer@test.com';
```

2. æ£€æŸ¥å·²å®Œæˆè®¢å•æ•°ï¼š
```sql
SELECT COUNT(*) as completed_orders
FROM orders 
WHERE user_id = (SELECT id FROM profiles WHERE email = 'buyer@test.com')
AND status = 'completed';
```

3. å¦‚æœæ•°æ®ä¸ä¸€è‡´ï¼Œæ‰‹åŠ¨æ›´æ–°ï¼š
```sql
-- æ›´æ–°å·²å®Œæˆåˆ†ææ¬¡æ•°
UPDATE user_pricing_info 
SET 
  completed_analyses = 2,
  next_price = 199  -- Â¥1.99 = 199åˆ†
WHERE user_id = (SELECT id FROM profiles WHERE email = 'buyer@test.com');
```

---

## æ•°æ®ç®¡ç†

### æŸ¥çœ‹ç³»ç»Ÿæ•°æ®

#### æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
```sql
SELECT 
  email,
  role,
  created_at
FROM profiles 
ORDER BY created_at DESC;
```

#### æŸ¥çœ‹æ‰€æœ‰ç¤¼å“ç 
```sql
SELECT 
  code,
  is_active,
  current_redemptions || '/' || max_redemptions as usage,
  CASE 
    WHEN expires_at IS NULL THEN 'æ°¸ä¹…æœ‰æ•ˆ'
    WHEN expires_at > now() THEN 'æœ‰æ•ˆ'
    ELSE 'å·²è¿‡æœŸ'
  END as status,
  created_at
FROM gift_codes 
ORDER BY created_at DESC;
```

#### æŸ¥çœ‹ç¤¼å“ç å…‘æ¢è®°å½•
```sql
SELECT 
  gc.code,
  p.email as user_email,
  gcr.remaining_uses,
  gcr.redeemed_at
FROM gift_code_redemptions gcr
JOIN gift_codes gc ON gcr.gift_code_id = gc.id
JOIN profiles p ON gcr.user_id = p.id
ORDER BY gcr.redeemed_at DESC;
```

#### æŸ¥çœ‹æ‰€æœ‰è®¢å•
```sql
SELECT 
  p.email,
  o.amount / 100.0 as amount_yuan,
  o.status,
  o.created_at,
  o.completed_at
FROM orders o
JOIN profiles p ON o.user_id = p.id
ORDER BY o.created_at DESC;
```

#### æŸ¥çœ‹æ”¶å…¥ç»Ÿè®¡
```sql
SELECT 
  COUNT(*) as total_orders,
  SUM(amount) / 100.0 as total_revenue_yuan,
  AVG(amount) / 100.0 as avg_order_yuan
FROM orders 
WHERE status = 'completed';
```

#### æŸ¥çœ‹ç”¨æˆ·å®šä»·ä¿¡æ¯
```sql
SELECT 
  p.email,
  upi.completed_analyses,
  upi.next_price / 100.0 as next_price_yuan,
  CASE 
    WHEN upi.completed_analyses = 0 THEN 'é¦–æ¬¡è´­ä¹°'
    WHEN upi.completed_analyses = 1 THEN 'ç¬¬äºŒæ¬¡è´­ä¹°'
    ELSE 'è€ç”¨æˆ·ä¼˜æƒ '
  END as price_tier
FROM user_pricing_info upi
JOIN profiles p ON upi.user_id = p.id
ORDER BY upi.completed_analyses DESC;
```

---

### é‡ç½®æµ‹è¯•æ•°æ®

**âš ï¸ è­¦å‘Šï¼šä»¥ä¸‹æ“ä½œä¼šåˆ é™¤æ‰€æœ‰æµ‹è¯•æ•°æ®ï¼Œè¯·è°¨æ…æ“ä½œï¼**

#### æ¸…ç©ºæ‰€æœ‰è®¢å•å’Œåˆ†æ
```sql
DELETE FROM deepseek_analyses;
DELETE FROM orders;
```

#### æ¸…ç©ºæ‰€æœ‰ç¤¼å“ç 
```sql
DELETE FROM gift_code_redemptions;
DELETE FROM gift_codes;
```

#### æ¸…ç©ºæ‰€æœ‰æµ‹è¯•è®°å½•
```sql
DELETE FROM test_submissions;
DELETE FROM test_results;
DELETE FROM reports;
```

#### é‡ç½®ç”¨æˆ·å®šä»·ä¿¡æ¯
```sql
DELETE FROM user_pricing_info;
```

#### é‡ç½®æ‰€æœ‰ç”¨æˆ·ä¸ºæ™®é€šç”¨æˆ·ï¼ˆä¿ç•™ç®¡ç†å‘˜ï¼‰
```sql
UPDATE profiles 
SET role = 'user'::user_role 
WHERE email != 'admin@test.com';  -- ä¿ç•™ç®¡ç†å‘˜è´¦å·
```

#### å®Œå…¨é‡ç½®ï¼ˆåˆ é™¤æ‰€æœ‰ç”¨æˆ·ï¼‰
```sql
-- âš ï¸ è¿™ä¼šåˆ é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼
DELETE FROM profiles;
DELETE FROM users;
```

---

## å®Œæ•´æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŸºç¡€åŠŸèƒ½
- [ ] âœ… ç”¨æˆ·å¯ä»¥æ³¨å†Œç™»å½•
- [ ] âœ… éªŒè¯ç æ­£å¸¸å‘é€å’ŒéªŒè¯
- [ ] âœ… å¯ä»¥å®Œæˆäººæ ¼æµ‹è¯•
- [ ] âœ… å¯ä»¥å®Œæˆäº¤æ˜“ç‰¹å¾æµ‹è¯•
- [ ] âœ… å¯ä»¥å®Œæˆæ•°å­¦é‡‘èæµ‹è¯•
- [ ] âœ… å¯ä»¥å®Œæˆé£é™©åå¥½æµ‹è¯•
- [ ] âœ… æ˜¾ç¤ºæµ‹è¯•ç»“æœå’ŒæŠ•èµ„å»ºè®®

### ç®¡ç†å‘˜åŠŸèƒ½
- [ ] âœ… æˆåŠŸè®¾ç½®ç®¡ç†å‘˜è´¦å·
- [ ] âœ… å¯ä»¥è®¿é—®ç®¡ç†åå°
- [ ] âœ… å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡æ•°æ®
- [ ] âœ… å¯ä»¥æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
- [ ] âœ… å¯ä»¥æŸ¥çœ‹è®¢å•åˆ—è¡¨

### ç¤¼å“ç åŠŸèƒ½
- [ ] âœ… å¯ä»¥ç”Ÿæˆç¤¼å“ç 
- [ ] âœ… å¯ä»¥å¤åˆ¶ç¤¼å“ç 
- [ ] âœ… å¯ä»¥å…‘æ¢ç¤¼å“ç 
- [ ] âœ… å…‘æ¢åæ˜¾ç¤ºå…è´¹æ¬¡æ•°
- [ ] âœ… å¯ä»¥ä½¿ç”¨å…è´¹æ¬¡æ•°
- [ ] âœ… ä½¿ç”¨åç”ŸæˆAIåˆ†æ
- [ ] âœ… å¯ä»¥åœç”¨/æ¿€æ´»ç¤¼å“ç 
- [ ] âœ… ç¤¼å“ç è¿‡æœŸæœºåˆ¶æ­£å¸¸
- [ ] âœ… ç¤¼å“ç æ¬¡æ•°é™åˆ¶æ­£å¸¸

### ä»˜è´¹åŠŸèƒ½
- [ ] âœ… æ˜¾ç¤ºæ­£ç¡®çš„ä»·æ ¼
- [ ] âœ… å¯ä»¥åˆ›å»ºè®¢å•
- [ ] âœ… å¯ä»¥æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ
- [ ] âœ… æ”¯ä»˜åç”ŸæˆAIåˆ†æ
- [ ] âœ… ä»·æ ¼é€’å‡æœºåˆ¶æ­£å¸¸ï¼ˆ3.99 â†’ 2.99 â†’ 1.99ï¼‰
- [ ] âœ… è®¢å•è®°å½•æ­£ç¡®ä¿å­˜

### æ•°æ®ç»Ÿè®¡
- [ ] âœ… ç”¨æˆ·æ•°ç»Ÿè®¡æ­£ç¡®
- [ ] âœ… è®¢å•æ•°ç»Ÿè®¡æ­£ç¡®
- [ ] âœ… æ”¶å…¥ç»Ÿè®¡æ­£ç¡®
- [ ] âœ… ç¤¼å“ç ç»Ÿè®¡æ­£ç¡®

---

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### è®¾ç½®ç®¡ç†å‘˜
```sql
UPDATE profiles SET role = 'admin'::user_role WHERE email = 'your-email@example.com';
```

### ç”Ÿæˆæµ‹è¯•ç¤¼å“ç ï¼ˆé€šè¿‡ç®¡ç†åå°ï¼‰
1. ç®¡ç†åå° â†’ ç¤¼å“ç ç®¡ç†
2. æœ€å¤§å…‘æ¢æ¬¡æ•°ï¼š10
3. æœ‰æ•ˆæœŸï¼šç•™ç©º
4. ç‚¹å‡»"ç”Ÿæˆç¤¼å“ç "

### æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ
```sql
UPDATE orders SET status = 'completed', completed_at = now() WHERE id = 'è®¢å•ID';
```

### æŸ¥çœ‹æœ€æ–°è®¢å•
```sql
SELECT * FROM orders ORDER BY created_at DESC LIMIT 1;
```

### æŸ¥çœ‹ç”¨æˆ·å…è´¹æ¬¡æ•°
```sql
SELECT p.email, SUM(gcr.remaining_uses) as free_analyses
FROM gift_code_redemptions gcr
JOIN profiles p ON gcr.user_id = p.id
GROUP BY p.email;
```

---

## æŠ€æœ¯æ”¯æŒ

### æŸ¥çœ‹æ—¥å¿—

#### æµè§ˆå™¨æ§åˆ¶å°
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. ç‚¹å‡»"Console"æ ‡ç­¾
3. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

#### Supabase æ—¥å¿—
1. è®¿é—® Supabase Dashboard
2. ç‚¹å‡»å·¦ä¾§"Logs"
3. é€‰æ‹©"Postgres Logs"æˆ–"API Logs"

### å¸¸ç”¨è°ƒè¯•å‘½ä»¤

#### æ£€æŸ¥æ•°æ®åº“è¿æ¥
```sql
SELECT now();  -- åº”è¯¥è¿”å›å½“å‰æ—¶é—´
```

#### æ£€æŸ¥è¡¨ç»“æ„
```sql
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_name = 'gift_codes';
```

#### æ£€æŸ¥ç´¢å¼•
```sql
SELECT indexname, indexdef 
FROM pg_indexes 
WHERE tablename = 'gift_codes';
```

---

## æ€»ç»“

æ­å–œï¼æ‚¨å·²ç»å®Œæˆäº†æ•´ä¸ªç³»ç»Ÿçš„éƒ¨ç½²å’Œæµ‹è¯•ã€‚

### æ‚¨ç°åœ¨å¯ä»¥ï¼š
- âœ… ç®¡ç†ç”¨æˆ·è´¦å·
- âœ… ç”Ÿæˆå’Œç®¡ç†ç¤¼å“ç 
- âœ… æŸ¥çœ‹è®¢å•å’Œæ”¶å…¥ç»Ÿè®¡
- âœ… æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- âœ… å¤„ç†å¸¸è§é—®é¢˜

### ä¸‹ä¸€æ­¥ï¼š
1. é‚€è¯·çœŸå®ç”¨æˆ·æµ‹è¯•
2. æ”¶é›†ç”¨æˆ·åé¦ˆ
3. æ ¹æ®éœ€è¦è°ƒæ•´ä»·æ ¼ç­–ç•¥
4. ç”Ÿæˆæ›´å¤šç¤¼å“ç ç”¨äºæ¨å¹¿
5. ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€

### éœ€è¦å¸®åŠ©ï¼Ÿ
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- æŸ¥çœ‹ Supabase æ—¥å¿—
- å‚è€ƒæœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
- æ£€æŸ¥æ•°æ®åº“è¡¨æ•°æ®æ˜¯å¦æ­£ç¡®

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
